<!DOCTYPE html>
<html>
<head>
    <title>Book Tickets</title>
</head>
<body>
    <h1>Book Tickets for {{ movie['title'] }}</h1>
    <form method="post">
        <label for="showtime">Showtime:</label>
    <select name="showtime" required onchange="this.form.submit()">
        <option value="">Select a showtime</option>
        {% for show in showtimes %}
            <option value="{{ show['id'] }}" {% if show['id'] == request.form.get('showtime', type=int) %}selected{% endif %}>{{ show['time'] }}</option>
        {% endfor %}
    </select><br><br>
    {% if available_seats %}
        <label>Select Seats (choose {{ request.form.get('tickets', 1) }}):</label><br>
        {% for seat in available_seats %}
            <input type="checkbox" name="seats" value="{{ seat['seat_number'] }}"> {{ seat['seat_number'] }}
            {% if loop.index % 10 == 0 %}<br>{% endif %}
        {% endfor %}
        <br>
    {% endif %}
        <label for="showtime">Showtime:</label>
        <select name="showtime" required>
            {% for show in showtimes %}
                <option value="{{ show['id'] }}">{{ show['time'] }}</option>
            {% endfor %}
        </select><br><br>
        <label for="tickets">Number of Tickets:</label>
        <input type="number" name="tickets" min="1" required><br><br>
        <label for="name">Your Name:</label>
        <input type="text" name="name" required><br><br>
        <h3>Payment Information</h3>
        <label for="card_number">Card Number:</label>
        <input type="text" name="card_number" required><br><br>
        <label for="card_name">Name on Card:</label>
        <input type="text" name="card_name" required><br><br>
        <button type="submit">Pay & Book</button>
    </form>
</body>
</html>
