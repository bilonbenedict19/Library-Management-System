<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h1>Admin Dashboard</h1>
    <a href="{{ url_for('add_movie') }}" class="btn btn-success mb-3">Add Movie</a>
    <a href="{{ url_for('index') }}" class="btn btn-secondary mb-3">Back to Home</a>
    <h2>Movies</h2>
    <ul class="list-group">
        {% for movie in movies %}
            <li class="list-group-item">
                <strong>{{ movie['title'] }}</strong> (â‚±{{ movie['price'] }})
                <a href="{{ url_for('edit_movie', movie_id=movie['id']) }}" class="btn btn-sm btn-warning ms-2">Edit</a>
                <a href="{{ url_for('delete_movie', movie_id=movie['id']) }}" class="btn btn-sm btn-danger ms-2">Delete</a>
                <ul>
                    <li>Showtimes:
                        <ul>
                        {% for show in showtimes %}
                            {% if show['movie_id'] == movie['id'] %}
                                <li>
                                    {{ show['time'] }}
                                    <a href="{{ url_for('delete_showtime', showtime_id=show['id']) }}" class="btn btn-sm btn-danger ms-2">Delete</a>
                                </li>
                            {% endif %}
                        {% endfor %}
                        </ul>
                        <a href="{{ url_for('add_showtime', movie_id=movie['id']) }}" class="btn btn-sm btn-success mt-1">Add Showtime</a>
                    </li>
                </ul>
            </li>
        {% endfor %}
    </ul>
</div>
</body>
</html>
